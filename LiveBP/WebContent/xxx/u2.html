<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>图片上传</title>
    
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    
    <style type="text/css">
    	.mask {
		    position: absolute;
		    top: 0;
		    left: 0;
		    width: 150px;
		    height: 150px;
		    background: rgba(101, 101, 101, 0.6);
		    color: #ffffff;
		    opacity: 0;
		}
		
		.img_div a:hover .mask {
		    opacity: 1;           
		}
    </style>
    
    <script type="text/javascript">
    	window.onload = function(){
    		alert("执行");
    		
    		var ajax;
			if(window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
				ajax=new XMLHttpRequest();
			}else{// code for IE6, IE5
			  ajax=new ActiveXObject("Microsoft.XMLHTTP");
			}
			
			ajax.open("POST","user/getUserSession2");
			ajax.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
			ajax.send(null);
			
			ajax.onreadystatechange=function(){
				
				if(ajax.readyState==4 && ajax.status==200){
					alert("成功");
					//var json = JSON.parse(ajax.responseText);
					var username = ajax.responseText;
					
					//alert(username);
					var span = document.getElementById("usernameSpan");
					span.innerHTML=username;
				}else{
					//alert("失败");
					//alert("失败")
					//alert(ajax.readyState+":"+ajax.status);
				}
				
			}
    	}
    </script>
    
</head>
<body>

	<img alt="" src="file//C:\Users\13662\Desktop\img\13662920679.png">
	
	<span id="usernameSpan"></span>
	

    <!-- 要将父布局的position设置为relative，父布局将无法包裹input -->
    <div style="position: relative;">
        <!--设置input的position为absolute，使其不按文档流排版，并设置其包裹整个布局 -->
        <!-- 设置opactity为0，使input变透明 -->
        <!-- 只接受jpg，gif和png格式 -->
        
        <!-- 自定义按钮效果 -->
        <div style="text-align: top;width: 150px; height: 150px;" class="img_div">
            <!-- <span style="font-size: 12px;">上传文件：</span> -->
            <img id="upload" src="image/touxiang.png" style="width: 150px; height: 150px; vertical-align: middle;" />
            <a>
            	
            	<div class="mask">
            		<input id="upload-input" style="position: absolute; top: 0; bottom: 0; left: 0;right: 0; opacity: 0;" type="file" accept="image/gif, image/jpg, image/png" onchange="showImg(this)"/>
               		<h3>修改头像</h3>
                </div>
        	</a>
        </div>
    </div>
    <script type="text/javascript">
    function aaa() {
		alert("aaaa");
	}
    function showImg(input) {
        var file = input.files[0];
        var reader = new FileReader();
        // 图片读取成功回调函数
        reader.onload = function(e) {
            document.getElementById('upload').src=e.target.result
        }
        reader.readAsDataURL(file);
    }
	</script>
</body>
</html>